<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Day 74: Setting up a Jitsi-Server (Part 2: Authentication for Meeting Creation) This article is part of The 100 | Literarily Starved</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.147.8">
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.4fc0b62e4b82c997bb0041217cd6b979.css" rel="stylesheet">
    

    

    
      
<link rel="shortcut icon" href="/images/icons8-hand-cursor-24.png" type="image/x-icon" />


    

    
    
    <meta property="og:url" content="https://blog.literarily-starved.com/2020/06/day-74-setting-up-a-jitsi-server-part-2-authentication-for-meeting-creation-this-article-is-part-of-the-100/">
  <meta property="og:site_name" content="Literarily Starved">
  <meta property="og:title" content="Day 74: Setting up a Jitsi-Server (Part 2: Authentication for Meeting Creation) This article is part of The 100">
  <meta property="og:description" content="In Part 1 I described how to do the basic setup of Jitsi. Unluckily this leaves your Jitsi server completely open. That is the intended setting for participating at a meeting, but not for initiating a new conference. That shall be reserved for authenticated users.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2020-06-02T12:00:00+02:00">
    <meta property="article:modified_time" content="2020-06-02T12:00:00+02:00">

  <meta itemprop="name" content="Day 74: Setting up a Jitsi-Server (Part 2: Authentication for Meeting Creation) This article is part of The 100">
  <meta itemprop="description" content="In Part 1 I described how to do the basic setup of Jitsi. Unluckily this leaves your Jitsi server completely open. That is the intended setting for participating at a meeting, but not for initiating a new conference. That shall be reserved for authenticated users.">
  <meta itemprop="datePublished" content="2020-06-02T12:00:00+02:00">
  <meta itemprop="dateModified" content="2020-06-02T12:00:00+02:00">
  <meta itemprop="wordCount" content="609">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Day 74: Setting up a Jitsi-Server (Part 2: Authentication for Meeting Creation) This article is part of The 100">
  <meta name="twitter:description" content="In Part 1 I described how to do the basic setup of Jitsi. Unluckily this leaves your Jitsi server completely open. That is the intended setting for participating at a meeting, but not for initiating a new conference. That shall be reserved for authenticated users.">
</head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        Literarily Starved
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/about.html" title="About page">
              About
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/contact.html" title="Contact/Author page">
              Contact/Author
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/legal.html" title="Legal/Disclaimer page">
              Legal/Disclaimer
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/posts/" title="Posts page">
              Posts
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/index.xml" title="RSS page">
              RSS
            </a>
          </li>
          
        </ul>
      
      












<a href="https://infosec.exchange/@masek" target="_blank" class="link-transition mastodon link dib z-999 pt3 pt0-l mr1" title="Mastodon link" rel="noopener" aria-label="follow on Mastodon——Opens in a new window">
  <svg height="32px"  style="enable-background:new 0 0 230 230;" version="1.1" viewBox="0 0 230 230" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<path d="M211.80683 139.0875c-3.1825 16.36625-28.4925 34.2775-57.5625 37.74875-15.16 1.80875-30.0825 3.47125-45.99875 2.74125-26.0275-1.1925-46.565-6.2125-46.565-6.2125 0 2.53375.15625 4.94625.46875 7.2025 3.38375 25.68625 25.47 27.225 46.3925 27.9425 21.115.7225 39.91625-5.20625 39.91625-5.20625l.86875 19.09s-14.77 7.93125-41.08125 9.39c-14.50875.7975-32.52375-.365-53.50625-5.91875C9.23183 213.82 1.40558 165.31125.20808 116.09125c-.36375-14.61375-.14-28.39375-.14-39.91875 0-50.33 32.97625-65.0825 32.97625-65.0825C49.67058 3.45375 78.20308.2425 107.86433 0h.72875c29.66125.2425 58.21125 3.45375 74.8375 11.09 0 0 32.97625 14.7525 32.97625 65.0825 0 0 .4125 37.13375-4.6 62.915" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
<path d="M65.68743 96.45938c0 9.01375-7.3075 16.32125-16.3225 16.32125-9.01375 0-16.32-7.3075-16.32-16.32125 0-9.01375 7.30625-16.3225 16.32-16.3225 9.015 0 16.3225 7.30875 16.3225 16.3225M124.52893 96.45938c0 9.01375-7.30875 16.32125-16.3225 16.32125-9.01375 0-16.32125-7.3075-16.32125-16.32125 0-9.01375 7.3075-16.3225 16.32125-16.3225 9.01375 0 16.3225 7.30875 16.3225 16.3225M183.36933 96.45938c0 9.01375-7.3075 16.32125-16.32125 16.32125-9.01375 0-16.32125-7.3075-16.32125-16.32125 0-9.01375 7.3075-16.3225 16.32125-16.3225 9.01375 0 16.32125 7.30875 16.32125 16.3225" fill="#fff"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>




    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        POSTS
      </aside>
      





      <h1 class="f1 athelas mt3 mb1">Day 74: Setting up a Jitsi-Server (Part 2: Authentication for Meeting Creation) This article is part of The 100</h1>
      
      
      <time class="f6 mv4 dib tracked" datetime="2020-06-02T12:00:00&#43;02:00">June 2, 2020</time>

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p>This article is part of <a href="/2020/03/day-1-100-day-offensive.html">The 100 Days Offensive</a>. Go to <a href="/2020/06/day-73-slacking.html">Day 73</a> or <a href="/2020/06/day-75-solve-one-problem-find-next-one.html">Day 75</a>.</p>
<p><strong>In <a href="/2020/05/day-62-setting-up-jitsi-server-part-1.html">Part 1</a> I described how to do the basic setup of Jitsi. Unluckily this leaves your Jitsi server completely open. That is the intended setting for participating at a meeting, but not for initiating a new conference. That shall be reserved for authenticated users.</strong></p>
<p>I have two intentions to setup a &ldquo;secured&rdquo; instance of Jitsi:</p>
<ul>
<li>Only authenticated moderators shall be able to start a new meeting room.</li>
<li>Anyone shall be able to join an already existing meeting room.</li>
</ul>
<p>To write this article, I have setup a new Jitsi instance for the FQDN &ldquo;jitsi.generic-domain.de&rdquo; following my own instructions from <a href="/2020/05/day-62-setting-up-jitsi-server-part-1.html">Part 1</a>.</p>
<p>The first step is to generate users with passwords. In order to be able to create users, you have to enable the authentication. This can be done in the file &ldquo;vi /etc/prosody/conf.avail/jitsi.generic-domain.de.cfg.lua&rdquo; (replace the FQDN by your own):</p>
<p><code>VirtualHost &quot;jitsi.generic-domain.de&quot;</code></p>
<p>​    <code>-- enabled = false -- Remove this line to enable this host</code></p>
<p>​    <em><code>authentication = &quot;anonymous&quot;</code></em></p>
<p>​    <strong><code>authentication = &quot;internal_hashed&quot;</code></strong></p>
<p>The slanted line has to be removed and the bold line has to be added.</p>
<p>Then you can create users on the command line using the following command:</p>
<p><code># sudo prosodyctl register username jitsi.generic-domain.de secretpassword</code></p>
<p>Of course you have to replace &ldquo;jitsi.generic-domain.de&rdquo; by the FQDN of your own server.</p>
<p>If you follow the <a href="https://github.com/jitsi/jicofo/blob/master/README.md#secure-domain">manual</a> on the internet, it tells you something like using the &ldquo;focus&rdquo; user. Do not do this. The focus user is already defined after the setup in part 1 and changing it&rsquo;s password will ruin your setup. Also do not use the &ldquo;auth&rdquo; subdomain. The page is not wrong, but it no longer describes the setup of a secure domain. That part was moved to another <a href="https://jitsi.github.io/handbook/docs/devops-guide/secure-domain">web page</a>. Nevertheless a lot of pages refer to it as manual.</p>
<p>Now restart the components:</p>
<p><code># /etc/init.d/jitsi-videobridge2 restart</code></p>
<p><code># /etc/init.d/jicofo restart</code></p>
<p><code># /etc/init.d/prosody restart</code></p>
<p>At this point you have a setup, where only authenticated users (like the one created above) can participate and initiate meetings. This is close, but not what I want.</p>
<p>The next step is allow anonymous users the participation. In order to that we modify the file &ldquo;/etc/jitsi/meet/jitsi.generic-domain.de-config.js&rdquo; (replace the FQDN by your own):</p>
<p><code>var config = {</code>
<code>// Connection</code>
<code>//</code></p>
<p><code>hosts: {</code>
<code>// XMPP domain.</code>
<code>domain: 'jitsi.generic-domain.de',</code></p>
<p>​    <code>// When using authentication, domain for guest users.</code>
​    <em><code>// anonymousdomain: 'guest.example.com',</code></em>
​    <strong><code>anonymousdomain: 'guest.jitsi.generic-domain.de',</code></strong></p>
<p>​    <code>// Domain for authenticated users. Defaults to &lt;domain&gt;.</code>
​    <code>// authdomain: 'jitsi.generic-domain.de',</code></p>
<p>​    <code>// Jirecon recording component domain.</code>
​    <code>// jirecon: 'jirecon.jitsi.generic-domain.de',</code></p>
<p>​    <code>// Call control component (Jigasi).</code>
​    <code>// call_control: 'callcontrol.jitsi.generic-domain.de',</code></p>
<p>​    <code>// Focus component domain. Defaults to focus.&lt;domain&gt;.</code>
​    <code>// focus: 'focus.jitsi.generic-domain.de',</code></p>
<p>​    <code>// XMPP MUC domain. FIXME: use XEP-0030 to discover it.</code>
​    <em><code>muc: 'conference.&lt;!--# echo var=&quot;subdomain&quot; default=&quot;&quot; --&gt;jitsi.generic-domain.de'</code></em>
​    <strong><code>muc: 'conference.jitsi.generic-domain.de'</code></strong>
<code>},</code></p>
<p><code>// BOSH URL. FIXME: use XEP-0156 to discover it.</code>
<code>bosh: '//jitsi.generic-domain.de/http-bind',</code></p>
<p><code>// Websocket URL</code>
<code>// websocket: 'wss://jitsi.generic-domain.de/xmpp-websocket',</code></p>
<p><code>// The name of client node advertised in XEP-0115 'c' stanza</code>
<code>clientNode: 'http://jitsi.org/jitsimeet',</code></p>
<p><code>// The real JID of focus participant - can be overridden here</code></p>
<p><em><code>// focusUserJid: 'focus@auth.jitsi.generic-domain.de',</code></em>
<strong><code>focusUserJid: 'focus@auth.jitsi.generic-domain.de',</code></strong></p>
<p>As before:The slanted line has to be removed and the bold line has to be added. Please replace the FQDN by your own. The same apply to the following lines you append to &ldquo;/etc/jitsi/meet/jitsi.generic-domain.de-config.js&rdquo;.</p>
<p><strong><code>VirtualHost &quot;guest.jitsi.generic-domain.de&quot;</code></strong></p>
<p><strong><code>authentication = &quot;anonymous&quot;</code></strong></p>
<p><strong><code>c2s_require_encryption = false</code></strong></p>
<p>The restart the server again:</p>
<p><code># /etc/init.d/jitsi-videobridge2 restart</code></p>
<p><code># /etc/init.d/jicofo restart</code></p>
<p><code># /etc/init.d/prosody restart</code></p>
<p>Now you have a setup where anyone can join an existing meeting, but only authenticated users can create one.</p>
<p>The setup is not complete yet. I try to be faster with the third part.</p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://blog.literarily-starved.com/" >
    &copy;  Literarily Starved 2025 
  </a>
    <div>












<a href="https://infosec.exchange/@masek" target="_blank" class="link-transition mastodon link dib z-999 pt3 pt0-l mr1" title="Mastodon link" rel="noopener" aria-label="follow on Mastodon——Opens in a new window">
  <svg height="32px"  style="enable-background:new 0 0 230 230;" version="1.1" viewBox="0 0 230 230" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<path d="M211.80683 139.0875c-3.1825 16.36625-28.4925 34.2775-57.5625 37.74875-15.16 1.80875-30.0825 3.47125-45.99875 2.74125-26.0275-1.1925-46.565-6.2125-46.565-6.2125 0 2.53375.15625 4.94625.46875 7.2025 3.38375 25.68625 25.47 27.225 46.3925 27.9425 21.115.7225 39.91625-5.20625 39.91625-5.20625l.86875 19.09s-14.77 7.93125-41.08125 9.39c-14.50875.7975-32.52375-.365-53.50625-5.91875C9.23183 213.82 1.40558 165.31125.20808 116.09125c-.36375-14.61375-.14-28.39375-.14-39.91875 0-50.33 32.97625-65.0825 32.97625-65.0825C49.67058 3.45375 78.20308.2425 107.86433 0h.72875c29.66125.2425 58.21125 3.45375 74.8375 11.09 0 0 32.97625 14.7525 32.97625 65.0825 0 0 .4125 37.13375-4.6 62.915" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
<path d="M65.68743 96.45938c0 9.01375-7.3075 16.32125-16.3225 16.32125-9.01375 0-16.32-7.3075-16.32-16.32125 0-9.01375 7.30625-16.3225 16.32-16.3225 9.015 0 16.3225 7.30875 16.3225 16.3225M124.52893 96.45938c0 9.01375-7.30875 16.32125-16.3225 16.32125-9.01375 0-16.32125-7.3075-16.32125-16.32125 0-9.01375 7.3075-16.3225 16.32125-16.3225 9.01375 0 16.3225 7.30875 16.3225 16.3225M183.36933 96.45938c0 9.01375-7.3075 16.32125-16.32125 16.32125-9.01375 0-16.32125-7.3075-16.32125-16.32125 0-9.01375 7.3075-16.3225 16.32125-16.3225 9.01375 0 16.32125 7.30875 16.32125 16.3225" fill="#fff"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>



</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
